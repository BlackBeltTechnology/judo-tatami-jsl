model TestDerivesWithParameters

type numeric Integer precision 9  scale 0
type string String max-length 128


entity SalesPerson {
	relation Lead[] leads opposite salesPerson

	derived Lead[] leadsBetween(Integer min = 10, Integer max = 100) = self.leads!filter(lead | lead.value > min and lead.value < max)
	derived Lead[] leadsOverMin(Integer min = 10) = self.leadsBetween(min = min, max = 100)
	derived Lead[] leadsOver10 = self.leadsOverMin(min = 20)

	derived Integer leadsBetweenCount(Integer min = 10, Integer max = 100) = self.leads!filter(lead | lead.value > min and lead.value < max)!count()
	derived Integer leadsOverMinCount(Integer min = 10) = self.leadsBetweenCount(min = min, max = 100)
	derived Integer leadsOver10Count = self.leadsOverMinCount(min = 20)
}

entity Lead {
	field Integer value = 100000
	relation required SalesPerson salesPerson opposite leads
}
